<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAMBA PUB POS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0f172a; color: white; font-family: sans-serif; margin: 0; padding: 0; }
        .table-btn.active { background: #ef4444; }
        .has-order { border-color: #22c55e; }
    </style>
</head>
<body class="h-screen flex">
    <!-- SOL MENÜ -->
    <div class="w-1/4 bg-slate-900 p-4 border-r border-slate-800">
        <h1 class="text-2xl font-bold text-red-500 mb-6">MAMBA PUB</h1>
        
        <!-- MASALAR -->
        <div class="space-y-2 mb-6">
            <div class="text-slate-400 text-sm font-bold mb-2">MASALAR</div>
            <div id="tables" class="grid grid-cols-2 gap-2">
                <!-- Masalar buraya gelecek -->
            </div>
        </div>

        <!-- KATEGORİLER -->
        <div class="space-y-2">
            <div class="text-slate-400 text-sm font-bold mb-2">KATEGORİLER</div>
            <div id="categories" class="space-y-2">
                <!-- Kategoriler buraya gelecek -->
            </div>
        </div>
    </div>

    <!-- ORTA ALAN - MENÜ -->
    <div class="w-2/4 p-4 overflow-auto">
        <div id="menu-grid" class="grid grid-cols-2 md:grid-cols-3 gap-4">
            <!-- Menü öğeleri buraya gelecek -->
        </div>
    </div>

    <!-- SAĞ ALAN - SİPARİŞ -->
    <div class="w-1/4 bg-slate-900 p-4 border-l border-slate-800">
        <h2 id="current-table" class="text-xl font-bold mb-4">MASA 1</h2>
        
        <!-- SİPARİŞ LİSTESİ -->
        <div id="order-list" class="mb-4 space-y-2 max-h-96 overflow-auto">
            <!-- Siparişler buraya gelecek -->
        </div>

        <!-- TOPLAM -->
        <div class="border-t border-slate-700 pt-4">
            <div class="flex justify-between mb-2">
                <span>Toplam:</span>
                <span id="total" class="font-bold">0.00 ₼</span>
            </div>
            <button onclick="printReceipt()" class="w-full bg-red-600 py-3 rounded font-bold hover:bg-red-700">
                ÇAP ET
            </button>
        </div>
    </div>

    <script>
        // MASALAR
        const tables = {
            "1": [], "2": [], "3": [], "4": [], "5": [], 
            "6": [], "7": [], "8": [], "K1": [], "K2": []
        };

        // MENÜ
        const menu = {
            "İsti": [
                {name: "Gürcü xəngəli", price: 8.00},
                {name: "Tabaka", price: 18.00},
                {name: "Kartof qızardılmış", price: 5.00}
            ],
            "Meze": [
                {name: "Pivə 1.80m", price: 1.80},
                {name: "Semiçka", price: 2.00},
                {name: "Çips", price: 4.00}
            ],
            "İçki": [
                {name: "Xırdalan 0.5L", price: 1.80},
                {name: "Cola 1L", price: 3.00},
                {name: "Su 0.5L", price: 0.80}
            ]
        };

        let currentTable = "1";

        // MASALARI YÜKLE
        function loadTables() {
            const tablesDiv = document.getElementById('tables');
            tablesDiv.innerHTML = '';
            Object.keys(tables).forEach(table => {
                const hasOrder = tables[table].length > 0;
                tablesDiv.innerHTML += `
                    <button onclick="selectTable('${table}')" 
                            class="p-3 rounded border ${currentTable === table ? 'active table-btn' : 'bg-slate-800'} ${hasOrder ? 'has-order border-green-500' : 'border-slate-700'}">
                        ${table.startsWith('K') ? 'KABİNET ' + table.slice(1) : 'MASA ' + table}
                    </button>
                `;
            });
        }

        // KATEGORİLERİ YÜKLE
        function loadCategories() {
            const catsDiv = document.getElementById('categories');
            catsDiv.innerHTML = '';
            Object.keys(menu).forEach(cat => {
                catsDiv.innerHTML += `
                    <button onclick="loadMenu('${cat}')" 
                            class="w-full p-3 text-left rounded bg-slate-800 hover:bg-slate-700">
                        ${cat}
                    </button>
                `;
            });
        }

        // MENÜ YÜKLE
        function loadMenu(category) {
            const menuGrid = document.getElementById('menu-grid');
            menuGrid.innerHTML = '';
            menu[category].forEach(item => {
                menuGrid.innerHTML += `
                    <div onclick="addItem('${item.name}', ${item.price})" 
                         class="p-4 rounded bg-slate-800 border border-slate-700 hover:border-red-500 cursor-pointer">
                        <div class="font-bold">${item.name}</div>
                        <div class="text-green-500 font-bold mt-2">${item.price.toFixed(2)} ₼</div>
                    </div>
                `;
            });
        }

        // MAS SEÇ
        function selectTable(table) {
            currentTable = table;
            document.getElementById('current-table').innerText = 
                table.startsWith('K') ? 'KABİNET ' + table.slice(1) : 'MASA ' + table;
            loadTables();
            updateOrderList();
        }

        // ÜRÜN EKLE
        function addItem(name, price) {
            const table = tables[currentTable];
            const existing = table.find(item => item.name === name);
            
            if (existing) {
                existing.quantity++;
            } else {
                table.push({name, price, quantity: 1});
            }
            
            updateOrderList();
            loadTables();
        }

        // SİPARİŞ LİSTESİNİ GÜNCELLE
        function updateOrderList() {
            const orderList = document.getElementById('order-list');
            const table = tables[currentTable];
            let total = 0;
            
            if (table.length === 0) {
                orderList.innerHTML = '<div class="text-slate-500 text-center">Sipariş yok</div>';
            } else {
                orderList.innerHTML = '';
                table.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    
                    orderList.innerHTML += `
                        <div class="flex justify-between items-center p-2 bg-slate-800 rounded">
                            <div>
                                <span class="text-red-500 font-bold">${item.quantity}x</span> ${item.name}
                            </div>
                            <div class="flex items-center gap-2">
                                <span>${itemTotal.toFixed(2)} ₼</span>
                                <button onclick="removeItem(${index})" class="text-red-500">×</button>
                            </div>
                        </div>
                    `;
                });
            }
            
            document.getElementById('total').innerText = total.toFixed(2) + ' ₼';
        }

        // ÜRÜN ÇIKAR
        function removeItem(index) {
            tables[currentTable].splice(index, 1);
            updateOrderList();
            loadTables();
        }

        // ÇAP ET
        function printReceipt() {
            const table = tables[currentTable];
            if (table.length === 0) {
                alert('Sipariş yok!');
                return;
            }
            
            let receipt = 'MAMBA PUB\n';
            receipt += '=============\n';
            receipt += (currentTable.startsWith('K') ? 'KABİNET ' + currentTable.slice(1) : 'MASA ' + currentTable) + '\n';
            receipt += '=============\n\n';
            
            let total = 0;
            table.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                receipt += `${item.quantity}x ${item.name} - ${itemTotal.toFixed(2)} ₼\n`;
            });
            
            receipt += '\n=============\n';
            receipt += `TOPLAM: ${total.toFixed(2)} ₼\n`;
            receipt += '=============\n';
            receipt += new Date().toLocaleString('az-AZ');
            
            const printWindow = window.open('', '_blank');
            printWindow.document.write('<pre>' + receipt + '</pre>');
            printWindow.document.close();
            printWindow.print();
        }

        // SAYFA YÜKLENDİĞİNDE
        window.onload = function() {
            loadTables();
            loadCategories();
            loadMenu('İsti');
            selectTable('1');
        };
    </script>
</body>
</html>
