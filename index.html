<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‚ô†Ô∏è Blackjack 21 | Telegram Casino</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a1a2a 0%, #1a2b3a 50%, #0a1a2a 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Arkaplan Animasyonu */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }

        .floating-card {
            position: absolute;
            font-size: 3rem;
            opacity: 0.2;
            animation: float 15s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            100% { transform: translateY(-100vh) rotate(360deg); }
        }

        /* Loading Ekranƒ± */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a1929;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-content {
            text-align: center;
            max-width: 500px;
            padding: 20px;
        }

        .loading-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #FFD700;
            font-weight: 700;
        }

        .loading-subtitle {
            font-size: 1.2rem;
            color: #aaa;
            margin-bottom: 40px;
        }

        .card-shuffle {
            width: 150px;
            height: 220px;
            background: white;
            border-radius: 15px;
            position: relative;
            margin: 0 auto 40px;
            transform-style: preserve-3d;
            animation: shuffle 2s infinite ease-in-out;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        @keyframes shuffle {
            0%, 100% { transform: rotateY(0deg) translateY(0); }
            25% { transform: rotateY(90deg) translateY(-30px); }
            50% { transform: rotateY(180deg) translateY(0); }
            75% { transform: rotateY(270deg) translateY(-30px); }
        }

        .card-shuffle:before {
            content: '‚ô†';
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 2.5rem;
            color: #222;
        }

        .card-shuffle:after {
            content: 'A';
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 2.5rem;
            color: #222;
            transform: rotate(180deg);
        }

        .loading-progress {
            width: 300px;
            background: rgba(255, 255, 255, 0.1);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .loading-bar {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA000);
            width: 0%;
            transition: width 0.3s;
            border-radius: 4px;
        }

        .loading-text {
            font-size: 1.1rem;
            color: #aaa;
        }

        /* Ana Konteyner */
        .app-container {
            display: none;
            flex-direction: column;
            min-height: 100vh;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .app-container.active {
            display: flex;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            background: rgba(16, 25, 40, 0.95);
            border-radius: 20px;
            margin-bottom: 25px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .profile-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid #FFD700;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }

        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-info h2 {
            font-size: 1.6rem;
            margin-bottom: 8px;
            color: white;
            font-weight: 600;
        }

        .profile-info p {
            color: #aaa;
            font-size: 1rem;
        }

        .profile-stats {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: #4CAF50;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #888;
        }

        .balance-container {
            text-align: right;
            padding: 15px 25px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .balance-title {
            font-size: 1rem;
            color: #aaa;
            margin-bottom: 8px;
        }

        .balance-amount {
            font-size: 3rem;
            font-weight: 800;
            color: #FFD700;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
        }

        .balance-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .balance-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .balance-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Oyun Masasƒ± */
        .game-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .table-container {
            flex: 1;
            background: linear-gradient(145deg, #1a3a5f, #0f2a4a);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 25px;
            border: 4px solid #2a4a7f;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.4),
                inset 0 0 100px rgba(0, 100, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .table-container:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 20%, rgba(255, 215, 0, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(0, 150, 255, 0.05) 0%, transparent 50%);
            pointer-events: none;
        }

        .table-title {
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 35px;
            color: #FFD700;
            text-shadow: 0 3px 15px rgba(255, 215, 0, 0.5);
            font-weight: 800;
            letter-spacing: 2px;
        }

        .table-title span {
            color: white;
            margin: 0 10px;
        }

        /* Oyuncu Alanƒ± */
        .players-area {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-bottom: 50px;
            flex-wrap: wrap;
            gap: 30px;
        }

        .player-seat {
            text-align: center;
            width: 160px;
            transition: all 0.3s;
        }

        .player-seat.active {
            transform: translateY(-20px);
        }

        .player-avatar {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            margin: 0 auto 15px;
            overflow: hidden;
            border: 4px solid #4CAF50;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .player-avatar.dealer {
            border-color: #FF5722;
        }

        .player-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .player-status {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .player-status.online {
            background: #4CAF50;
            color: white;
        }

        .player-status.turn {
            background: #FFD700;
            color: #333;
            animation: pulseTurn 1.5s infinite;
        }

        @keyframes pulseTurn {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .player-info {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .player-name {
            font-size: 1.1rem;
            margin-bottom: 8px;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .player-chips {
            font-size: 1.3rem;
            color: #FFD700;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .player-score {
            font-size: 1.8rem;
            font-weight: 800;
            color: white;
        }

        .player-action {
            margin-top: 10px;
            font-size: 0.9rem;
            padding: 5px 12px;
            border-radius: 20px;
            display: inline-block;
        }

        .action-hit { background: #4CAF50; color: white; }
        .action-stand { background: #2196F3; color: white; }
        .action-bust { background: #F44336; color: white; }
        .action-blackjack { background: #FFD700; color: #333; }

        /* Kart Alanƒ± */
        .cards-area {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
            min-height: 160px;
            align-items: center;
            flex-wrap: wrap;
        }

        .card {
            width: 100px;
            height: 150px;
            background: white;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            animation: dealCard 0.6s ease-out;
            position: relative;
            transform-style: preserve-3d;
        }

        @keyframes dealCard {
            0% { transform: translateY(-100px) rotate(-20deg) scale(0.8); opacity: 0; }
            70% { transform: translateY(20px) rotate(10deg) scale(1.1); }
            100% { transform: translateY(0) rotate(0) scale(1); opacity: 1; }
        }

        .card.hidden {
            background: linear-gradient(45deg, #2a4a7f, #1a3a5f);
            color: transparent;
        }

        .card.hidden:before,
        .card.hidden:after {
            content: '?';
            color: rgba(255, 255, 255, 0.5);
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .card.red { color: #D32F2F; }
        .card.black { color: #222; }

        .card-value {
            font-size: 1.8rem;
            font-weight: bold;
            position: absolute;
            top: 12px;
            left: 12px;
        }

        .card-suit {
            font-size: 3.5rem;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .card-value.bottom {
            top: auto;
            left: auto;
            bottom: 12px;
            right: 12px;
            transform: rotate(180deg);
        }

        /* Oyun Kontrolleri */
        .controls-area {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 22px 40px;
            border: none;
            border-radius: 18px;
            font-size: 1.4rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s;
            min-width: 180px;
            justify-content: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .control-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .control-btn:hover:before {
            left: 100%;
        }

        .control-btn.hit {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
        }

        .control-btn.stand {
            background: linear-gradient(135deg, #2196F3, #0D47A1);
            color: white;
        }

        .control-btn.double {
            background: linear-gradient(135deg, #FF9800, #EF6C00);
            color: white;
        }

        .control-btn.split {
            background: linear-gradient(135deg, #9C27B0, #6A1B9A);
            color: white;
        }

        .control-btn.bet {
            background: linear-gradient(135deg, #FFD700, #FFA000);
            color: #333;
            font-weight: 800;
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .control-btn:not(:disabled):hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .control-btn:not(:disabled):active {
            transform: translateY(-2px);
        }

        .btn-icon {
            font-size: 1.6rem;
        }

        /* Bahis Kontrolleri */
        .betting-area {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 20px;
            padding: 25px;
            margin-top: 20px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .bet-title {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #FFD700;
        }

        .bet-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .bet-amount {
            font-size: 2.5rem;
            color: #FFD700;
            font-weight: bold;
            min-width: 150px;
            text-align: center;
        }

        .bet-buttons {
            display: flex;
            gap: 15px;
        }

        .bet-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .bet-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .bet-btn.primary {
            background: linear-gradient(135deg, #FFD700, #FFA000);
            color: #333;
            font-weight: bold;
        }

        .bet-chips {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .chip {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

        .chip:hover {
            transform: scale(1.1) rotate(15deg);
        }

        .chip-10 { background: #FF5722; border-color: #FF8A65; color: white; }
        .chip-25 { background: #2196F3; border-color: #64B5F6; color: white; }
        .chip-50 { background: #4CAF50; border-color: #81C784; color: white; }
        .chip-100 { background: #FFD700; border-color: #FFE44D; color: #333; }
        .chip-500 { background: #9C27B0; border-color: #BA68C8; color: white; }

        /* Bildirimler */
        .notification-area {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 350px;
            z-index: 1000;
        }

        .notification {
            background: rgba(16, 25, 40, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid #4CAF50;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            animation: slideIn 0.5s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #4CAF50;
            font-weight: 600;
        }

        .notification-message {
            color: #ddd;
            line-height: 1.5;
        }

        .notification.warning { border-left-color: #FF9800; }
        .notification.warning .notification-title { color: #FF9800; }
        .notification.error { border-left-color: #F44336; }
        .notification.error .notification-title { color: #F44336; }
        .notification.info { border-left-color: #2196F3; }
        .notification.info .notification-title { color: #2196F3; }

        /* Modallar */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(10px);
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            background: linear-gradient(145deg, #1a2b3a, #0a1a2a);
            border-radius: 25px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            border: 2px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: #aaa;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: white;
        }

        .modal-title {
            font-size: 2rem;
            margin-bottom: 25px;
            color: #FFD700;
            text-align: center;
        }

        .modal-content {
            color: #ddd;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .modal-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        /* Zamanlayƒ±cƒ± */
        .timer-container {
            text-align: center;
            margin: 20px 0;
        }

        .timer {
            font-size: 2.5rem;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 10px;
            font-family: monospace;
        }

        .timer-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .timer-progress {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA000);
            border-radius: 4px;
            transition: width 1s linear;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .balance-container {
                text-align: center;
                width: 100%;
            }
            
            .players-area {
                gap: 20px;
            }
            
            .player-seat {
                width: 130px;
            }
            
            .controls-area {
                gap: 15px;
            }
            
            .control-btn {
                padding: 18px 30px;
                min-width: 150px;
                font-size: 1.2rem;
            }
            
            .card {
                width: 80px;
                height: 120px;
            }
        }

        @media (max-width: 480px) {
            .player-seat {
                width: 100px;
            }
            
            .control-btn {
                padding: 15px 20px;
                min-width: 130px;
                font-size: 1.1rem;
            }
            
            .card {
                width: 70px;
                height: 105px;
            }
            
            .chip {
                width: 50px;
                height: 50px;
                font-size: 1rem;
            }
        }

        /* Oyun Sonu Animasyonu */
        .confetti {
            position: fixed;
            width: 15px;
            height: 15px;
            background: #FFD700;
            top: -20px;
            z-index: 9999;
            animation: confettiFall 5s linear forwards;
        }

        @keyframes confettiFall {
            to { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        /* Utility Classes */
        .text-center { text-align: center; }
        .text-gold { color: #FFD700; }
        .text-green { color: #4CAF50; }
        .text-red { color: #F44336; }
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.5s ease; }
    </style>
</head>
<body>
    <!-- Arkaplan Animasyonu -->
    <div class="bg-animation" id="bgAnimation"></div>

    <!-- Loading Ekranƒ± -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <h1 class="loading-title">‚ô†Ô∏è BLACKJACK 21 ‚ô•Ô∏è</h1>
            <p class="loading-subtitle">Profesyonel Casino Oyununa Ho≈ü Geldiniz</p>
            
            <div class="card-shuffle"></div>
            
            <div class="loading-progress">
                <div class="loading-bar" id="loadingBar"></div>
            </div>
            
            <p class="loading-text" id="loadingText">Sunucuya baƒülanƒ±yor...</p>
        </div>
    </div>

    <!-- Ana Uygulama -->
    <div class="app-container" id="appContainer">
        <!-- Header -->
        <header class="header">
            <div class="user-profile">
                <div class="profile-avatar">
                    <img id="userAvatar" src="https://ui-avatars.com/api/?name=Player&background=random" alt="Avatar">
                </div>
                <div class="profile-info">
                    <h2 id="userName">Y√ºkleniyor...</h2>
                    <p id="userId">ID: ----</p>
                    <div class="profile-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="totalWins">0</div>
                            <div class="stat-label">Galibiyet</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="creditScore">100</div>
                            <div class="stat-label">Kredi</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="balance-container">
                <div class="balance-title">BAKƒ∞YE</div>
                <div class="balance-amount" id="balanceAmount">1.000 ‚Ç∫</div>
                <div class="balance-actions">
                    <button class="balance-btn" onclick="showDepositModal()">
                        <i class="fas fa-plus"></i> Y√ºkle
                    </button>
                    <button class="balance-btn" onclick="requestCredit()">
                        <i class="fas fa-coins"></i> Kredi Al
                    </button>
                    <button class="balance-btn" onclick="showStatsModal()">
                        <i class="fas fa-chart-bar"></i> ƒ∞statistik
                    </button>
                </div>
            </div>
        </header>

        <!-- Oyun Alanƒ± -->
        <main class="game-area">
            <div class="table-container">
                <h2 class="table-title">‚ô†Ô∏è <span>BLACKJACK MASASI</span> ‚ô£Ô∏è</h2>
                
                <!-- Oyuncular -->
                <div class="players-area" id="playersArea">
                    <!-- Oyuncular buraya dinamik eklenecek -->
                </div>
                
                <!-- Kartlar -->
                <div class="cards-area" id="cardsArea">
                    <!-- Kartlar buraya eklenecek -->
                </div>
                
                <!-- Zamanlayƒ±cƒ± -->
                <div class="timer-container">
                    <div class="timer" id="gameTimer">25</div>
                    <div class="timer-bar">
                        <div class="timer-progress" id="timerProgress"></div>
                    </div>
                </div>
                
                <!-- Kontroller -->
                <div class="controls-area" id="controlsArea">
                    <button class="control-btn hit" id="hitBtn" onclick="playerAction('hit')" disabled>
                        <i class="fas fa-plus btn-icon"></i>
                        KART √áEK
                    </button>
                    <button class="control-btn stand" id="standBtn" onclick="playerAction('stand')" disabled>
                        <i class="fas fa-hand-paper btn-icon"></i>
                        DUR
                    </button>
                    <button class="control-btn double" id="doubleBtn" onclick="playerAction('double')" disabled>
                        <i class="fas fa-times-circle btn-icon"></i>
                        2X BAHƒ∞S
                    </button>
                    <button class="control-btn bet" id="betBtn" onclick="openBetting()">
                        <i class="fas fa-coins btn-icon"></i>
                        BAHƒ∞S YAP
                    </button>
                </div>
                
                <!-- Bahis Alanƒ± -->
                <div class="betting-area" id="bettingArea" style="display: none;">
                    <h3 class="bet-title">BAHƒ∞S Mƒ∞KTARI</h3>
                    <div class="bet-controls">
                        <div class="bet-amount" id="betAmount">100</div>
                        <div class="bet-buttons">
                            <button class="bet-btn" onclick="changeBet(-10)">-10</button>
                            <button class="bet-btn" onclick="changeBet(-50)">-50</button>
                            <button class="bet-btn" onclick="changeBet(-100)">-100</button>
                            <button class="bet-btn" onclick="changeBet(10)">+10</button>
                            <button class="bet-btn" onclick="changeBet(50)">+50</button>
                            <button class="bet-btn" onclick="changeBet(100)">+100</button>
                            <button class="bet-btn primary" onclick="placeBet()">BAHƒ∞S YAP</button>
                        </div>
                    </div>
                    <div class="bet-chips">
                        <div class="chip chip-10" onclick="setBet(10)">10</div>
                        <div class="chip chip-25" onclick="setBet(25)">25</div>
                        <div class="chip chip-50" onclick="setBet(50)">50</div>
                        <div class="chip chip-100" onclick="setBet(100)">100</div>
                        <div class="chip chip-500" onclick="setBet(500)">500</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Bildirimler -->
    <div class="notification-area" id="notificationArea"></div>

    <!-- Modallar -->
    <div class="modal-overlay" id="depositModal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('depositModal')">&times;</button>
            <h2 class="modal-title">üí∞ BAKƒ∞YE Y√úKLE</h2>
            <div class="modal-content">
                <p>Kullanƒ±labilir kredi limitiniz: <span id="creditLimit" class="text-gold">500</span> ‚Ç∫</p>
                <div class="bet-controls" style="margin: 30px 0;">
                    <div class="bet-amount" id="depositAmount">100</div>
                    <div class="bet-buttons">
                        <button class="bet-btn" onclick="changeDeposit(-100)">-100</button>
                        <button class="bet-btn" onclick="changeDeposit(-50)">-50</button>
                        <button class="bet-btn" onclick="changeDeposit(50)">+50</button>
                        <button class="bet-btn" onclick="changeDeposit(100)">+100</button>
                    </div>
                </div>
                <p class="text-center" style="color: #aaa;">
                    Kredi kullanƒ±mƒ± kredi skorunuzu etkiler. √ñdemeler zamanƒ±nda yapƒ±lmalƒ±dƒ±r.
                </p>
            </div>
            <div class="modal-actions">
                <button class="control-btn hit" onclick="processDeposit()">
                    <i class="fas fa-check"></i> ONAYLA
                </button>
                <button class="control-btn stand" onclick="closeModal('depositModal')">
                    <i class="fas fa-times"></i> ƒ∞PTAL
                </button>
            </div>
        </div>
    </div>

    <!-- ƒ∞statistikler Modal -->
    <div class="modal-overlay" id="statsModal">
        <div class="modal">
            <button class="modal-close" onclick="closeModal('statsModal')">&times;</button>
            <h2 class="modal-title">üìä ƒ∞STATƒ∞STƒ∞KLER</h2>
            <div class="modal-content">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px;">
                    <div class="stat-item">
                        <div class="stat-value" id="statGames">0</div>
                        <div class="stat-label">Toplam Oyun</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statWins">0</div>
                        <div class="stat-label">Kazanƒ±lan</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statWinRate">0%</div>
                        <div class="stat-label">Kazanma Oranƒ±</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statProfit">0</div>
                        <div class="stat-label">Toplam Kar</div>
                    </div>
                </div>
                <h3 style="color: #FFD700; margin-bottom: 15px;">üèÜ Lƒ∞DERLƒ∞K TABLOSU</h3>
                <div id="leaderboard" style="max-height: 200px; overflow-y: auto;">
                    <!-- Liderlik tablosu buraya eklenecek -->
                </div>
            </div>
            <div class="modal-actions">
                <button class="control-btn stand" onclick="closeModal('statsModal')">
                    <i class="fas fa-times"></i> KAPAT
                </button>
            </div>
        </div>
    </div>

    <!-- Socket.io -->
    <script src="/socket.io/socket.io.js"></script>
    
    <script>
        // Global Deƒüi≈ükenler
        let socket = null;
        let currentUser = null;
        let currentTable = null;
        let gameState = 'waiting';
        let currentBet = 100;
        let gameTimer = null;
        let timeLeft = 25;
        let playerCards = [];
        let dealerCards = [];
        
        // Sayfa Y√ºklendiƒüinde
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('Blackjack 21 y√ºkleniyor...');
            
            // Arkaplan animasyonu olu≈ütur
            createBackgroundAnimation();
            
            // Telegram kontrol√º
            await checkTelegramAuth();
            
            // Loading bar animasyonu
            simulateLoading();
            
            // WebSocket baƒülantƒ±sƒ±nƒ± kur
            setTimeout(() => connectWebSocket(), 2000);
        });
        
        // Arkaplan animasyonu
        function createBackgroundAnimation() {
            const bg = document.getElementById('bgAnimation');
            const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
            const colors = ['#FFD700', '#4CAF50', '#2196F3', '#9C27B0'];
            
            for (let i = 0; i < 15; i++) {
                const card = document.createElement('div');
                card.className = 'floating-card';
                card.textContent = suits[Math.floor(Math.random() * suits.length)];
                card.style.color = colors[Math.floor(Math.random() * colors.length)];
                card.style.left = Math.random() * 100 + '%';
                card.style.animationDelay = Math.random() * 5 + 's';
                card.style.fontSize = (Math.random() * 4 + 2) + 'rem';
                card.style.opacity = Math.random() * 0.3 + 0.1;
                bg.appendChild(card);
            }
        }
        
        // Loading sim√ºlasyonu
        function simulateLoading() {
            const loadingBar = document.getElementById('loadingBar');
            const loadingText = document.getElementById('loadingText');
            const texts = [
                'Sunucuya baƒülanƒ±yor...',
                'Oyun verileri y√ºkleniyor...',
                'Telegram entegrasyonu hazƒ±rlanƒ±yor...',
                'Masa aranƒ±yor...',
                'Ba≈ülatƒ±lƒ±yor...'
            ];
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;
                
                loadingBar.style.width = progress + '%';
                
                if (progress >= 20 && progress < 40) {
                    loadingText.textContent = texts[1];
                } else if (progress >= 40 && progress < 60) {
                    loadingText.textContent = texts[2];
                } else if (progress >= 60 && progress < 80) {
                    loadingText.textContent = texts[3];
                } else if (progress >= 80) {
                    loadingText.textContent = texts[4];
                }
                
                if (progress >= 100) {
                    clearInterval(interval);
                }
            }, 300);
        }
        
        // Telegram kontrol√º
        async function checkTelegramAuth() {
            const urlParams = new URLSearchParams(window.location.search);
            const tgData = urlParams.get('tgData');
            
            if (tgData) {
                try {
                    const userData = JSON.parse(decodeURIComponent(tgData));
                    currentUser = {
                        id: userData.id || `user_${Date.now()}`,
                        username: userData.username || 'AnonPlayer',
                        firstName: userData.first_name || 'Oyuncu',
                        lastName: userData.last_name || '',
                        photoUrl: userData.photo_url || `https://ui-avatars.com/api/?name=${userData.first_name}&background=random`
                    };
                    
                    // Kullanƒ±cƒ± bilgilerini g√∂ster
                    document.getElementById('userName').textContent = currentUser.firstName;
                    document.getElementById('userAvatar').src = currentUser.photoUrl;
                    document.getElementById('userId').textContent = `ID: ${currentUser.id.substring(0, 8)}`;
                    
                } catch (error) {
                    console.error('Telegram veri hatasƒ±:', error);
                    createDemoUser();
                }
            } else {
                createDemoUser();
            }
        }
        
        // Demo kullanƒ±cƒ± olu≈ütur
        function createDemoUser() {
            currentUser = {
                id: `demo_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                username: 'DemoPlayer',
                firstName: 'Demo',
                lastName: 'Oyuncu',
                photoUrl: 'https://ui-avatars.com/api/?name=Demo+Player&background=FFD700&color=333'
            };
            
            document.getElementById('userName').textContent = currentUser.firstName;
            document.getElementById('userAvatar').src = currentUser.photoUrl;
            document.getElementById('userId').textContent = `ID: ${currentUser.id.substring(0, 8)}`;
            
            showNotification('Demo modunda oynuyorsunuz', 'warning');
        }
        
        // WebSocket baƒülantƒ±sƒ±
        function connectWebSocket() {
            // Render.com sunucusuna baƒülan
            const serverUrl = window.location.hostname === 'localhost' 
                ? 'http://localhost:3000' 
                : `https://${window.location.hostname}`;
            
            socket = io(serverUrl, {
                transports: ['websocket'],
                reconnection: true,
                reconnectionAttempts: 5,
                reconnectionDelay: 1000
            });
            
            socket.on('connect', () => {
                console.log('‚úÖ WebSocket baƒülantƒ±sƒ± kuruldu');
                
                // Loading ekranƒ±nƒ± kapat
                setTimeout(() => {
                    document.getElementById('loadingScreen').classList.add('hidden');
                    document.getElementById('appContainer').classList.add('active');
                    
                    // Telegram login yap
                    socket.emit('telegram-login', {
                        initData: window.location.search
                    });
                    
                    // Masa ara
                    setTimeout(() => {
                        socket.emit('find-table', {});
                        showNotification('Masa aranƒ±yor...', 'info');
                    }, 1000);
                }, 500);
            });
            
            // Event Listeners
            socket.on('login-success', handleLoginSuccess);
            socket.on('table-joined', handleTableJoined);
            socket.on('table-update', handleTableUpdate);
            socket.on('game-starting', handleGameStarting);
            socket.on('initial-cards', handleInitialCards);
            socket.on('player-turn', handlePlayerTurn);
            socket.on('card-dealt', handleCardDealt);
            socket.on('player-stand', handlePlayerStand);
            socket.on('player-busted', handlePlayerBusted);
            socket.on('player-blackjack', handlePlayerBlackjack);
            socket.on('bet-placed', handleBetPlaced);
            socket.on('balance-update', handleBalanceUpdate);
            socket.on('game-result', handleGameResult);
            socket.on('round-results', handleRoundResults);
            socket.on('credit-approved', handleCreditApproved);
            socket.on('error', handleSocketError);
            
            socket.on('disconnect', () => {
                showNotification('Sunucu baƒülantƒ±sƒ± kesildi', 'error');
            });
        }
        
        // Socket Event Handlers
        function handleLoginSuccess(data) {
            console.log('‚úÖ Giri≈ü ba≈üarƒ±lƒ±:', data.user);
            currentUser = data.user;
            
            // UI g√ºncelle
            document.getElementById('userName').textContent = currentUser.firstName || currentUser.username;
            document.getElementById('balanceAmount').textContent = formatBalance(currentUser.balance);
            document.getElementById('totalWins').textContent = currentUser.totalWins;
            document.getElementById('creditScore').textContent = currentUser.creditScore;
            
            if (currentUser.photoUrl) {
                document.getElementById('userAvatar').src = currentUser.photoUrl;
            }
        }
        
        function handleTableJoined(data) {
            console.log('‚úÖ Masa katƒ±ldƒ±:', data.tableId);
            currentTable = data.tableId;
            
            showNotification(data.isDealer ? 'Daƒüƒ±tƒ±cƒ± olarak katƒ±ldƒ±nƒ±z' : 'Masa bulundu', 'info');
            
            // Eƒüer dealer isek otomatik bahis yap
            if (data.isDealer) {
                setTimeout(() => {
                    socket.emit('place-bet', {
                        tableId: currentTable,
                        amount: 100
                    });
                }, 2000);
            }
        }
        
        function handleTableUpdate(data) {
            console.log('üîÑ Masa g√ºncellendi:', data.players.length, 'oyuncu');
            updatePlayersUI(data.players);
        }
        
        function handleGameStarting(data) {
            showNotification('Oyun ba≈ülƒ±yor! ' + data.message, 'info');
            startBettingTimer(data.bettingTime);
        }
        
        function handleInitialCards(data) {
            console.log('üÉè ƒ∞lk kartlar daƒüƒ±tƒ±ldƒ±');
            playerCards = data.cards;
            updateCardsUI();
            
            // Kontrolleri aktif et
            if (data.status === 'playing') {
                document.getElementById('hitBtn').disabled = false;
                document.getElementById('standBtn').disabled = false;
                document.getElementById('doubleBtn').disabled = currentUser.balance < currentBet * 2;
            }
        }
        
        function handlePlayerTurn(data) {
            showNotification(`${data.player} sƒ±rasƒ±`, 'info');
            startPlayerTimer(data.time);
        }
        
        function handleCardDealt(data) {
            console.log('üÉè Kart daƒüƒ±tƒ±ldƒ±:', data.card);
            
            // Kendi kartƒ±mƒ±zsa
            if (data.player === currentUser.username) {
                playerCards.push(data.card);
                updateCardsUI();
            }
            
            // Skoru g√ºncelle
            updatePlayerScore(data.player, data.score, data.status);
        }
        
        function handlePlayerStand(data) {
            showNotification(`${data.player} durdu`, 'info');
        }
        
        function handlePlayerBusted(data) {
            showNotification(`üí• ${data.player} battƒ±!`, 'error');
            createConfetti(20);
        }
        
        function handlePlayerBlackjack(data) {
            showNotification(`üé∞ ${data.player} BLACKJACK!`, 'info');
            createConfetti(50);
        }
        
        function handleBetPlaced(data) {
            showNotification(`${data.player} ${data.amount} ‚Ç∫ bahis yaptƒ±`, 'info');
            document.getElementById('betAmount').textContent = data.amount;
        }
        
        function handleBalanceUpdate(data) {
            currentUser.balance = data.balance;
            document.getElementById('balanceAmount').textContent = formatBalance(data.balance);
        }
        
        function handleGameResult(data) {
            console.log('üèÜ Oyun sonucu:', data.result);
            
            let message = '';
            let type = 'info';
            
            switch(data.result) {
                case 'won':
                    message = `üéâ Kazandƒ±nƒ±z! ${data.winAmount} ‚Ç∫`;
                    type = 'info';
                    createConfetti(100);
                    break;
                case 'blackjack':
                    message = `üé∞ BLACKJACK! ${data.winAmount} ‚Ç∫`;
                    type = 'info';
                    createConfetti(150);
                    break;
                case 'lost':
                    message = 'üòî Kaybettiniz';
                    type = 'error';
                    break;
                case 'push':
                    message = 'ü§ù Berabere, paranƒ±z iade edildi';
                    type = 'warning';
                    break;
                case 'busted':
                    message = 'üí• Battƒ±nƒ±z!';
                    type = 'error';
                    break;
            }
            
            showNotification(message, type);
            
            // Bakiyeyi g√ºncelle
            currentUser.balance = data.newBalance;
            document.getElementById('balanceAmount').textContent = formatBalance(data.newBalance);
            
            // Kartlarƒ± g√∂ster
            showFinalCards(data.cards, data.dealerCards, data.dealerScore);
            
            // Kontrolleri sƒ±fƒ±rla
            resetControls();
            
            // 5 saniye sonra yeni oyun
            setTimeout(() => {
                socket.emit('find-table', {});
                showNotification('Yeni masa aranƒ±yor...', 'info');
            }, 5000);
        }
        
        function handleRoundResults(data) {
            console.log('üìä Round sonu√ßlarƒ±:', data.results);
            
            // Sonu√ßlarƒ± g√∂ster
            let resultHtml = '';
            data.results.forEach(result => {
                resultHtml += `<p style="margin: 10px 0; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                    <strong>${result.player}</strong>: ${result.result} 
                    ${result.winAmount > 0 ? `<span class="text-gold">${result.winAmount} ‚Ç∫</span>` : ''}
                </p>`;
            });
            
            showNotification(`Round bitti!`, 'info');
            
            // Dealer kartlarƒ±nƒ± g√∂ster
            if (data.dealerCards) {
                showDealerCards(data.dealerCards, data.dealerScore);
            }
        }
        
        function handleCreditApproved(data) {
            showNotification(`üí∞ ${data.amount} ‚Ç∫ kredi onaylandƒ±`, 'info');
            currentUser.balance = data.newBalance;
            currentUser.creditScore = data.newCreditScore;
            
            document.getElementById('balanceAmount').textContent = formatBalance(data.newBalance);
            document.getElementById('creditScore').textContent = data.newCreditScore;
        }
        
        function handleSocketError(data) {
            showNotification('Hata: ' + data.message, 'error');
        }
        
        // UI Fonksiyonlarƒ±
        function updatePlayersUI(players) {
            const playersArea = document.getElementById('playersArea');
            playersArea.innerHTML = '';
            
            players.forEach((player, index) => {
                const isCurrentUser = player.telegramId === currentUser?.id;
                const isDealer = player.isDealer;
                const isActive = player.status === 'playing';
                
                const playerHtml = `
                    <div class="player-seat ${isActive ? 'active' : ''}">
                        <div class="player-avatar ${isDealer ? 'dealer' : ''}">
                            <img src="${player.photoUrl || 'https://ui-avatars.com/api/?name=' + player.username + '&background=random'}" 
                                 alt="${player.username}">
                            <div class="player-status ${isActive ? 'turn' : 'online'}">
                                ${isDealer ? '‚ô†Ô∏è' : (isActive ? 'üîÑ' : '‚úÖ')}
                            </div>
                        </div>
                        <div class="player-info">
                            <div class="player-name">${player.username} ${isCurrentUser ? '(Siz)' : ''}</div>
                            <div class="player-chips">${player.betAmount || 0} ‚Ç∫</div>
                            <div class="player-score">${player.score || 0}</div>
                            ${player.status !== 'waiting' ? `
                                <div class="player-action action-${player.status}">
                                    ${getStatusText(player.status)}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
                
                playersArea.innerHTML += playerHtml;
            });
        }
        
        function updateCardsUI() {
            const cardsArea = document.getElementById('cardsArea');
            cardsArea.innerHTML = '';
            
            // Oyuncu kartlarƒ±nƒ± g√∂ster
            playerCards.forEach(card => {
                const cardHtml = createCardElement(card, false);
                cardsArea.innerHTML += cardHtml;
            });
        }
        
        function createCardElement(card, isHidden) {
            const isRed = card.suit === '‚ô•' || card.suit === '‚ô¶';
            const colorClass = isRed ? 'red' : 'black';
            
            if (isHidden) {
                return `
                    <div class="card hidden" data-value="${card.value}">
                        <div class="card-value">?</div>
                        <div class="card-suit">?</div>
                        <div class="card-value bottom">?</div>
                    </div>
                `;
            }
            
            return `
                <div class="card ${colorClass}" data-value="${card.value}">
                    <div class="card-value">${card.name}</div>
                    <div class="card-suit">${card.suit}</div>
                    <div class="card-value bottom">${card.name}</div>
                </div>
            `;
        }
        
        function updatePlayerScore(playerName, score, status) {
            // Skor g√ºncelleme UI'ƒ± burada yapƒ±lacak
            console.log(`${playerName} skoru: ${score}, durum: ${status}`);
        }
        
        function showFinalCards(playerCards, dealerCards, dealerScore) {
            const cardsArea = document.getElementById('cardsArea');
            cardsArea.innerHTML = '';
            
            // Oyuncu kartlarƒ±
            playerCards.forEach(card => {
                cardsArea.innerHTML += createCardElement(card, false);
            });
            
            // Ayrƒ±cƒ±
            cardsArea.innerHTML += '<div style="width: 50px; text-align: center; color: #FFD700; font-size: 2rem;">VS</div>';
            
            // Dealer kartlarƒ±
            if (dealerCards) {
                dealerCards.forEach(card => {
                    cardsArea.innerHTML += createCardElement(card, false);
                });
            }
        }
        
        function showDealerCards(cards, score) {
            console.log('Dealer kartlarƒ±:', cards, 'Skor:', score);
        }
        
        // Oyun Kontrolleri
        function playerAction(action) {
            if (!socket || !currentTable) return;
            
            switch(action) {
                case 'hit':
                    socket.emit('player-hit', { tableId: currentTable });
                    break;
                case 'stand':
                    socket.emit('player-stand', { tableId: currentTable });
                    break;
                case 'double':
                    if (currentUser.balance >= currentBet * 2) {
                        socket.emit('place-bet', {
                            tableId: currentTable,
                            amount: currentBet
                        });
                        socket.emit('player-hit', { tableId: currentTable });
                    }
                    break;
            }
            
            // Kontrolleri devre dƒ±≈üƒ± bƒ±rak
            document.getElementById('hitBtn').disabled = true;
            document.getElementById('standBtn').disabled = true;
            document.getElementById('doubleBtn').disabled = true;
        }
        
        function openBetting() {
            document.getElementById('bettingArea').style.display = 'block';
            document.getElementById('controlsArea').style.display = 'none';
        }
        
        function closeBetting() {
            document.getElementById('bettingArea').style.display = 'none';
            document.getElementById('controlsArea').style.display = 'flex';
        }
        
        function changeBet(amount) {
            currentBet = Math.max(10, Math.min(5000, currentBet + amount));
            document.getElementById('betAmount').textContent = currentBet;
        }
        
        function setBet(amount) {
            currentBet = amount;
            document.getElementById('betAmount').textContent = currentBet;
        }
        
        function placeBet() {
            if (!socket || !currentTable || currentBet > currentUser.balance) {
                showNotification('Yetersiz bakiye!', 'error');
                return;
            }
            
            socket.emit('place-bet', {
                tableId: currentTable,
                amount: currentBet
            });
            
            closeBetting();
        }
        
        function requestCredit() {
            if (!socket) return;
            
            if (confirm('Kredi almak istediƒüinize emin misiniz? Kredi skorunuz etkilenecektir.')) {
                socket.emit('request-credit', {});
            }
        }
        
        // Zamanlayƒ±cƒ± Fonksiyonlarƒ±
        function startBettingTimer(seconds) {
            clearInterval(gameTimer);
            timeLeft = seconds;
            
            const timerElement = document.getElementById('gameTimer');
            const progressElement = document.getElementById('timerProgress');
            
            gameTimer = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                progressElement.style.width = ((timeLeft / seconds) * 100) + '%';
                
                if (timeLeft <= 10) {
                    timerElement.style.color = '#FF5722';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(gameTimer);
                    // Otomatik bahis yap
                    if (currentTable) {
                        socket.emit('place-bet', {
                            tableId: currentTable,
                            amount: Math.min(100, currentUser.balance)
                        });
                    }
                }
            }, 1000);
        }
        
        function startPlayerTimer(seconds) {
            clearInterval(gameTimer);
            timeLeft = seconds;
            
            const timerElement = document.getElementById('gameTimer');
            const progressElement = document.getElementById('timerProgress');
            
            timerElement.style.color = '#FFD700';
            
            gameTimer = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                progressElement.style.width = ((timeLeft / seconds) * 100) + '%';
                
                if (timeLeft <= 10) {
                    timerElement.style.color = '#FF5722';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(gameTimer);
                    // Zaman doldu, otomatik dur
                    if (currentTable) {
                        socket.emit('player-stand', { tableId: currentTable });
                    }
                }
            }, 1000);
        }
        
        function resetControls() {
            document.getElementById('hitBtn').disabled = true;
            document.getElementById('standBtn').disabled = true;
            document.getElementById('doubleBtn').disabled = true;
            document.getElementById('betBtn').disabled = false;
            
            clearInterval(gameTimer);
            document.getElementById('gameTimer').textContent = '25';
            document.getElementById('timerProgress').style.width = '100%';
        }
        
        // Modal Fonksiyonlarƒ±
        function showDepositModal() {
            document.getElementById('depositModal').classList.add('active');
        }
        
        function showStatsModal() {
            // ƒ∞statistikleri y√ºkle
            loadStatistics();
            document.getElementById('statsModal').classList.add('active');
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        
        function changeDeposit(amount) {
            const depositElement = document.getElementById('depositAmount');
            let current = parseInt(depositElement.textContent);
            current = Math.max(50, Math.min(1000, current + amount));
            depositElement.textContent = current;
        }
        
        function processDeposit() {
            const amount = parseInt(document.getElementById('depositAmount').textContent);
            showNotification(`${amount} ‚Ç∫ kredi talep edildi`, 'info');
            closeModal('depositModal');
            
            // Kredi iste
            requestCredit();
        }
        
        async function loadStatistics() {
            // ƒ∞statistikleri y√ºkle
            document.getElementById('statGames').textContent = currentUser?.totalGames || 0;
            document.getElementById('statWins').textContent = currentUser?.totalWins || 0;
            
            const winRate = currentUser?.totalGames > 0 
                ? Math.round((currentUser.totalWins / currentUser.totalGames) * 100) 
                : 0;
            document.getElementById('statWinRate').textContent = winRate + '%';
            
            // Liderlik tablosu
            const leaderboard = document.getElementById('leaderboard');
            leaderboard.innerHTML = '<p style="color: #aaa; text-align: center;">Y√ºkleniyor...</p>';
            
            // Sunucudan liderlik tablosunu al
            try {
                const response = await fetch('/api/leaderboard');
                const data = await response.json();
                
                let html = '';
                data.forEach((player, index) => {
                    html += `
                        <div style="display: flex; justify-content: space-between; padding: 10px; 
                                    background: ${index % 2 === 0 ? 'rgba(255,255,255,0.05)' : 'transparent'};
                                    border-radius: 5px; margin: 5px 0;">
                            <div>
                                <span style="color: #FFD700; margin-right: 10px;">${index + 1}.</span>
                                ${player.username}
                            </div>
                            <div style="color: #4CAF50; font-weight: bold;">
                                ${formatBalance(player.balance)}
                            </div>
                        </div>
                    `;
                });
                
                leaderboard.innerHTML = html || '<p style="color: #aaa; text-align: center;">Veri bulunamadƒ±</p>';
            } catch (error) {
                leaderboard.innerHTML = '<p style="color: #F44336; text-align: center;">Y√ºklenemedi</p>';
            }
        }
        
        // Yardƒ±mcƒ± Fonksiyonlar
        function showNotification(message, type = 'info') {
            const notificationArea = document.getElementById('notificationArea');
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="notification-title">${getNotificationTitle(type)}</div>
                <div class="notification-message">${message}</div>
            `;
            
            notificationArea.prepend(notification);
            
            // 5 saniye sonra kaldƒ±r
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }
        
        function getNotificationTitle(type) {
            switch(type) {
                case 'error': return '‚ö†Ô∏è Hata';
                case 'warning': return '‚ö†Ô∏è Uyarƒ±';
                case 'info': return '‚ÑπÔ∏è Bilgi';
                default: return 'üì¢ Bildirim';
            }
        }
        
        function getStatusText(status) {
            const statusMap = {
                'waiting': 'Bekliyor',
                'playing': 'Oynuyor',
                'stood': 'Durdu',
                'busted': 'Battƒ±',
                'blackjack': 'Blackjack'
            };
            return statusMap[status] || status;
        }
        
        function formatBalance(amount) {
            return new Intl.NumberFormat('tr-TR', {
                style: 'currency',
                currency: 'TRY'
            }).format(amount);
        }
        
        function createConfetti(count) {
            const colors = ['#FFD700', '#4CAF50', '#2196F3', '#9C27B0', '#FF5722'];
            
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 20 + 10 + 'px';
                confetti.style.height = Math.random() * 20 + 10 + 'px';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                
                document.body.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }
        
        // Global fonksiyonlar
        window.playerAction = playerAction;
        window.openBetting = openBetting;
        window.closeBetting = closeBetting;
        window.changeBet = changeBet;
        window.setBet = setBet;
        window.placeBet = placeBet;
        window.requestCredit = requestCredit;
        window.showDepositModal = showDepositModal;
        window.showStatsModal = showStatsModal;
        window.closeModal = closeModal;
        window.changeDeposit = changeDeposit;
        window.processDeposit = processDeposit;
    </script>
</body>
</html>
