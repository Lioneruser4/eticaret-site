<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Universal Barkod Oxuyucu</title>
<script src="https://unpkg.com/html5-qrcode"></script>
<style>
body { font-family: Arial; background:#f2f2f2; padding:20px; text-align:center; }
video { width: 100%; max-width:400px; border-radius:10px; }
#result { margin-top:20px; background:white; padding:15px; border-radius:10px; text-align:left; }
</style>
</head>

<body>

<h2>üì∑ Universal Barkod / QR Oxuyucu</h2>
<video id="reader"></video>
<div id="result">Barkod g√∂zl…ônilir...</div>

<script>
const qr = new Html5Qrcode("reader");

qr.start(
    { facingMode: "environment" },
    { fps: 10, qrbox: 250 },
    async code => {
        document.getElementById("result").innerHTML = "<b>Kod:</b> " + code + "<br><br>M…ôlumat y√ºkl…ônir...";

        let info = "";

        // 1Ô∏è‚É£ OpenFoodFacts ‚Äî Qida
        try {
            let food = await fetch(`https://world.openfoodfacts.org/api/v0/product/${code}.json`).then(r => r.json());
            if (food.status === 1) {
                info += `<h3>üçé Qida / Market</h3>
                Ad: ${food.product.product_name}<br>
                Marka: ${food.product.brands}<br>
                Kategoriya: ${food.product.categories}<br>
                √ñlk…ô: ${food.product.countries}<br>`;
            }
        } catch {}

        // 2Ô∏è‚É£ OpenBeautyFacts ‚Äî Parf√ºm, kosmetika
        try {
            let beauty = await fetch(`https://world.openbeautyfacts.org/api/v0/product/${code}.json`).then(r => r.json());
            if (beauty.status === 1) {
                info += `<h3>üíÑ Parf√ºm / Kosmetika</h3>
                Ad: ${beauty.product.product_name}<br>
                Marka: ${beauty.product.brands}<br>
                T…ôrkib: ${beauty.product.ingredients_text}<br>`;
            }
        } catch {}

        // 3Ô∏è‚É£ OpenProductData ‚Äì √ºmumi m…ôhsullar
        try {
            let prod = await fetch(`https://api.upcdatabase.org/product/${code}`).then(r => r.json());
            if (prod && prod.title) {
                info += `<h3>üì¶ √úmumi M…ôhsul</h3>
                Ad: ${prod.title}<br>
                ≈ûirk…ôt: ${prod.manufacturer}<br>`;
            }
        } catch {}

        // 4Ô∏è‚É£ Elektronika ‚Äî UPCItemDB
        try {
            let upc = await fetch(`https://api.upcitemdb.com/prod/trial/lookup?upc=${code}`).then(r => r.json());
            if (upc.items && upc.items.length) {
                info += `<h3>üì± Elektronika</h3>
                Ad: ${upc.items[0].title}<br>
                Brand: ${upc.items[0].brand}<br>
                Kateqoriya: ${upc.items[0].category}<br>`;
            }
        } catch {}

        // N…ôtic…ôni g√∂st…ôr
        document.getElementById("result").innerHTML = info || "‚ùå He√ß bir m…ôlumat tapƒ±lmadƒ±.";
    }
);
</script>

</body>
</html>
