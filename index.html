<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MÉ™lÉ™k Chat</title>
<style>
/* BÉ™dÉ™n vÉ™ É™sas layout */
body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: #0e1621;
  color: #fff;
  display: flex;
  flex-direction: column;
  height: 100vh;
}

/* Chat container */
#chat {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 5px;
}

/* Mesaj balonlarÄ± */
.message {
  max-width: 80%;
  padding: 10px 15px;
  border-radius: 20px;
  word-wrap: break-word;
  line-height: 1.4;
  font-size: 16px;
}
.user {
  background: #70a1ff;
  color: #000;
  align-self: flex-end;
  border-bottom-right-radius: 0;
}
.ai {
  background: #1a2b4c;
  align-self: flex-start;
  border-bottom-left-radius: 0;
}

/* Input area */
#inputArea {
  display: flex;
  padding: 10px;
  background: #121c2d;
}
#inputArea input {
  flex: 1;
  padding: 10px 15px;
  border-radius: 25px;
  border: none;
  outline: none;
  font-size: 16px;
}
#inputArea button {
  margin-left: 10px;
  padding: 10px 15px;
  border-radius: 25px;
  border: none;
  background: #70a1ff;
  color: #000;
  font-weight: bold;
  cursor: pointer;
}

/* YazÄ±r animasiyasÄ± */
#typing {
  font-size: 18px;
  color: #0ff;
  font-weight: bold;
  padding-left: 10px;
  display: none;
}

/* Scrollbar minimal */
#chat::-webkit-scrollbar {width: 6px;}
#chat::-webkit-scrollbar-thumb {background: #70a1ff; border-radius: 3px;}
#chat::-webkit-scrollbar-track {background: transparent;}
</style>
</head>
<body>

<div id="chat"></div>
<div id="typing">YazÄ±r...</div>

<div id="inputArea">
  <input id="userInput" placeholder="Mesaj yaz..." autocomplete="off" />
  <button id="sendBtn">GÃ¶ndÉ™r</button>
</div>

<script>
// ElementlÉ™r
const chat = document.getElementById('chat');
const input = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const typing = document.getElementById('typing');

// Telegram istifadÉ™Ã§i adÄ±
let telegramUser = localStorage.getItem('telegramUser') || 'Xaliq';
localStorage.setItem('telegramUser', telegramUser);

// MesajlarÄ± localStorage-dÉ™ saxla
let messages = JSON.parse(localStorage.getItem('chatMessages') || '[]');
function saveMessages(){
  localStorage.setItem('chatMessages', JSON.stringify(messages));
}

// Mesaj É™lavÉ™ funksiyasÄ±
function addMessage(text, cls, save=true){
  const msg = document.createElement('div');
  msg.className = 'message ' + cls;
  msg.textContent = text;
  chat.appendChild(msg);
  chat.scrollTop = chat.scrollHeight;
  
  if(save) {
    messages.push({text, cls});
    saveMessages();
  }
}

// SÉ™hifÉ™ yÃ¼klÉ™nÉ™ndÉ™ É™vvÉ™lki mesajlarÄ± gÃ¶stÉ™r
messages.forEach(m=>addMessage(m.text, m.cls, false));

// Pulsuz AI cavab generator (simulyasiya)
async function getAIResponse(userMsg){
  typing.style.display='block';
  await new Promise(r=>setTimeout(r,1000));
  typing.style.display='none';

  userMsg = userMsg.toLowerCase();

  if(userMsg.includes('sahibin kimdir')){
    return `MÉ™ni kodlayan vÉ™ sahibim Xaliq Mustafayevdir. Telegram vÉ™ Instagram: @xaliqmustafayev`;
  } else if(userMsg.includes('salam') || userMsg.includes('hi')){
    return `Salam ${telegramUser}! MÉ™n MÉ™lÉ™k, dostca AI-san. NecÉ™ kÃ¶mÉ™k edÉ™ bilÉ™rÉ™m?`;
  } else if(userMsg.includes('necÉ™sÉ™n')){
    return `MÉ™n yaxÅŸÄ±yam ${telegramUser}, sÉ™n necÉ™sÉ™n? ðŸ˜Š`;
  } else {
    const responses = [
      `Hmm, maraqlÄ± sualdÄ±r!`,
      `Bunu dÃ¼ÅŸÃ¼ndÃ¼m, amma sÉ™n nÉ™ fikirlÉ™ÅŸirsÉ™n?`,
      `HeÃ§ bir problem yoxdur, davam edÉ™k!`,
      `Haha, maraqlÄ± dedin!`,
      `ÆlbÉ™ttÉ™, sÉ™nÉ™ kÃ¶mÉ™k edÉ™ bilÉ™rÉ™m.`
    ];
    return responses[Math.floor(Math.random()*responses.length)];
  }
}

// GÃ¶ndÉ™r funksiyasÄ±
async function sendMessage(){
  const msg = input.value.trim();
  if(!msg) return;
  addMessage(msg,'user');
  input.value='';

  // KlaviaturanÄ± baÄŸlama
  input.focus();

  const aiResp = await getAIResponse(msg);
  addMessage(aiResp,'ai');
}

// Send dÃ¼ymÉ™si
sendBtn.addEventListener('click', sendMessage);
input.addEventListener('keydown', e=>{if(e.key==='Enter') sendMessage();});

// Telegram WebView tam ekran
if(window.Telegram?.WebApp){ Telegram.WebApp.expand(); }
</script>

</body>
</html>
