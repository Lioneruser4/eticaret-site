<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://app.adsgram.ai/js/adstg.js"></script>
</head>
<body style="background: #0e1621; color: white; text-align: center;">

    <h2>REKLAM TEST SİSTEMİ</h2>
    <p>ID: 20355 / int-20355</p>

    <button id="reklamButonu" style="padding: 20px; font-size: 20px; background: #2481cc; color: white; border-radius: 10px;">
        VİDEOYU BAŞLAT
    </button>

    <div id="hataMesaji" style="color: #ff4444; margin-top: 20px; font-family: monospace;"></div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // 3. Bağlantı Ayarı: Paneldeki ID'ni buraya yaz
        const AdController = window.Adsgram.init({ blockId: "20355" }); 

        // Butona tıklandığında ne olacağını söylüyoruz
        document.getElementById('reklamButonu').onclick = function() {
            document.getElementById('hataMesaji').innerText = "Reklam aranıyor...";

            // 4. Tetikleme: Adsgram'dan reklamı istiyoruz
            AdController.show().then((result) => {
                document.getElementById('hataMesaji').innerText = "BAŞARILI: Reklam gösterildi.";
                tg.showAlert("Ödül Kazandınız!");
            }).catch((err) => {
                // Eğer reklam gelmezse, hata burada yazar
                console.error(err);
                document.getElementById('hataMesaji').innerText = "HATA: " + JSON.stringify(err);
            });
        };
    </script>
</body>
</html>
