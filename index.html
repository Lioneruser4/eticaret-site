<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MÉ™lÉ™k Chat</title>
<style>
  body {
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background: #0e1621;
    color: #fff;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
  }
  #chat {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    display: flex;
    flex-direction: column;
  }
  .message {
    max-width: 80%;
    margin: 5px 0;
    padding: 10px 15px;
    border-radius: 20px;
    word-wrap: break-word;
  }
  .user { background: #70a1ff; align-self: flex-end; color: #000; }
  .ai { background: #1a2b4c; align-self: flex-start; }
  #inputArea {
    display: flex;
    padding: 10px;
    background: #121c2d;
  }
  #inputArea input {
    flex: 1;
    padding: 10px;
    border-radius: 20px;
    border: none;
    outline: none;
    font-size: 16px;
  }
  #inputArea button {
    margin-left: 10px;
    padding: 10px 15px;
    border-radius: 20px;
    border: none;
    background: #70a1ff;
    color: #000;
    font-weight: bold;
    cursor: pointer;
  }
  #typing {
    font-size: 18px;
    color: #0ff;
    font-weight: bold;
    padding-left: 10px;
    display: none;
  }
  /* Voice lobby icon */
  #voiceBtn {
    position: fixed;
    top: 10px;
    right: 10px;
    background: #0ff;
    border-radius: 50%;
    padding: 12px;
    cursor: pointer;
    z-index: 1000;
  }
  /* Voice lobby fullscreen */
  #voiceLobby {
    display: none;
    position: fixed;
    top:0; left:0; right:0; bottom:0;
    background: #0e1621;
    z-index: 999;
    justify-content: center;
    align-items: center;
    flex-direction: column;
  }
  #voiceLobby h2 {
    color: #0ff;
    margin-bottom: 20px;
  }
  #closeVoice {
    background: red;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 15px;
    cursor: pointer;
  }
</style>
</head>
<body>

<div id="chat"></div>

<div id="typing">YazÄ±r...</div>

<div id="inputArea">
  <input id="userInput" placeholder="Mesaj yaz..." />
  <button id="sendBtn">GÃ¶ndÉ™r</button>
</div>

<div id="voiceBtn">ðŸ“ž</div>

<div id="voiceLobby">
  <h2>Voice Lobby</h2>
  <p>AnlÄ±q sÉ™sli danÄ±ÅŸÄ±q burada olacaq...</p>
  <button id="closeVoice">BaÄŸla</button>
</div>

<script>
const chat = document.getElementById('chat');
const input = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const typing = document.getElementById('typing');
const voiceBtn = document.getElementById('voiceBtn');
const voiceLobby = document.getElementById('voiceLobby');
const closeVoice = document.getElementById('closeVoice');

// Ä°stifadÉ™Ã§i adÄ±nÄ± Telegram WebView-dÉ™n almaq Ã¼Ã§Ã¼n simulasiya
let telegramUser = localStorage.getItem('telegramUser') || 'Xaliq';
localStorage.setItem('telegramUser', telegramUser);

function addMessage(text, cls){
  const msg = document.createElement('div');
  msg.className = 'message ' + cls;
  msg.textContent = text;
  chat.appendChild(msg);
  chat.scrollTop = chat.scrollHeight;
}

// AI cavabÄ±nÄ± API-dÉ™n gÃ¶tÃ¼rmÉ™ simulasiya
async function getAIResponse(userMsg){
  typing.style.display = 'block';
  
  // API Ã§aÄŸÄ±rÄ±ÅŸÄ± simulyasiyasÄ±
  await new Promise(r => setTimeout(r, 1000)); // 1s gecikmÉ™
  typing.style.display = 'none';
  
  // AI cavabÄ±, filtrli / dostca
  let response = '';
  if(userMsg.toLowerCase().includes('sahibin kimdir')){
    response = `MÉ™ni kodlayan vÉ™ sahibim Xaliq Mustafayevdir. Telegram vÉ™ Instagram: @xaliqmustafayev`;
  } else {
    response = `Salam ${telegramUser}! MÉ™n MÉ™lÉ™k, dostca AI-san. NecÉ™ kÃ¶mÉ™k edÉ™ bilÉ™rÉ™m?`;
  }
  
  return response;
}

// GÃ¶ndÉ™r dÃ¼ymÉ™si
sendBtn.addEventListener('click', async () => {
  const msg = input.value.trim();
  if(!msg) return;
  
  addMessage(msg, 'user');
  input.value = '';
  
  const aiResp = await getAIResponse(msg);
  addMessage(aiResp, 'ai');
});

// Enter ilÉ™ gÃ¶ndÉ™r
input.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter') sendBtn.click();
});

// Voice lobby aÃ§
voiceBtn.addEventListener('click', ()=>{
  voiceLobby.style.display = 'flex';
});

// Voice lobby baÄŸla
closeVoice.addEventListener('click', ()=>{
  voiceLobby.style.display = 'none';
});

// Telegram WebView tam ekran Ã¼Ã§Ã¼n mobil uyÄŸun
if(window.Telegram?.WebApp){
  Telegram.WebApp.expand();
}
</script>

</body>
</html>
