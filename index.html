<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>Among Us - Mobil</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>

<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <div class="crewmate-loading"></div>
            </div>
            <div class="loading-text">Y√ºkleniyor...</div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Main Menu -->
    <div id="main-menu" class="screen hidden">
        <div class="menu-header">
            <div class="user-profile">
                <img id="user-avatar" src="" alt="Avatar" class="avatar">
                <div class="user-info">
                    <div id="user-name" class="username">Guest</div>
                    <div id="user-id" class="user-id">ID: 0000</div>
                </div>
            </div>
        </div>

        <div class="menu-content">
            <h1 class="game-title">AMONG US</h1>

            <div class="menu-buttons">
                <button class="btn btn-primary" id="btn-quick-match">
                    <span class="btn-icon">üéÆ</span>
                    <span class="btn-text">Hƒ±zlƒ± Oyun</span>
                </button>

                <button class="btn btn-secondary" id="btn-create-room">
                    <span class="btn-icon">‚ûï</span>
                    <span class="btn-text">Oda Olu≈ütur</span>
                </button>

                <button class="btn btn-secondary" id="btn-join-room">
                    <span class="btn-icon">üîç</span>
                    <span class="btn-text">Odaya Katƒ±l</span>
                </button>

                <button class="btn btn-tertiary" id="btn-settings">
                    <span class="btn-icon">‚öôÔ∏è</span>
                    <span class="btn-text">Ayarlar</span>
                </button>
            </div>
        </div>

        <div class="menu-footer">
            <div class="online-count">
                <span class="status-dot"></span>
                <span id="online-players">0</span> Oyuncu √áevrimi√ßi
            </div>
        </div>
    </div>

    <!-- Create Room Screen -->
    <div id="create-room-screen" class="screen hidden">
        <div class="screen-header">
            <button class="btn-back" id="btn-back-from-create">‚Üê</button>
            <h2>Oda Olu≈ütur</h2>
        </div>

        <div class="room-settings">
            <div class="setting-group">
                <label>Oda Adƒ±</label>
                <input type="text" id="room-name" placeholder="Oda adƒ±nƒ± girin" maxlength="20">
            </div>

            <div class="setting-group">
                <label>≈ûifre (ƒ∞steƒüe Baƒülƒ±)</label>
                <input type="password" id="room-password" placeholder="≈ûifre belirleyin">
            </div>

            <div class="setting-group">
                <label>Maksimum Oyuncu: <span id="max-players-value">10</span></label>
                <input type="range" id="max-players" min="4" max="10" value="10">
            </div>

            <div class="setting-group">
                <label>ƒ∞mposter Sayƒ±sƒ±: <span id="imposter-count-value">2</span></label>
                <input type="range" id="imposter-count" min="1" max="3" value="2">
            </div>

            <div class="setting-group">
                <label>Polis Sayƒ±sƒ±: <span id="police-count-value">1</span></label>
                <input type="range" id="police-count" min="0" max="2" value="1">
            </div>

            <div class="setting-group">
                <label>G√∂rev Sayƒ±sƒ±: <span id="task-count-value">5</span></label>
                <input type="range" id="task-count" min="3" max="10" value="5">
            </div>

            <div class="setting-group">
                <label>Acil Toplantƒ± Sayƒ±sƒ±: <span id="emergency-count-value">1</span></label>
                <input type="range" id="emergency-count" min="0" max="3" value="1">
            </div>

            <div class="setting-group">
                <label>Tartƒ±≈üma S√ºresi (sn): <span id="discussion-time-value">45</span></label>
                <input type="range" id="discussion-time" min="15" max="120" step="15" value="45">
            </div>

            <div class="setting-group">
                <label>Oylama S√ºresi (sn): <span id="voting-time-value">60</span></label>
                <input type="range" id="voting-time" min="30" max="120" step="15" value="60">
            </div>
        </div>

        <button class="btn btn-primary btn-large" id="btn-create-room-confirm">
            Oda Olu≈ütur
        </button>
    </div>

    <!-- Join Room Screen -->
    <div id="join-room-screen" class="screen hidden">
        <div class="screen-header">
            <button class="btn-back" id="btn-back-from-join">‚Üê</button>
            <h2>Odaya Katƒ±l</h2>
        </div>

        <div class="room-list" id="room-list">
            <!-- Rooms will be dynamically added here -->
        </div>
    </div>

    <!-- Room Lobby Screen -->
    <div id="room-lobby-screen" class="screen hidden">
        <div class="screen-header">
            <button class="btn-back" id="btn-leave-room">‚Üê</button>
            <h2 id="lobby-room-name">Oda</h2>
        </div>

        <div class="lobby-info">
            <div class="lobby-code">
                Kod: <span id="lobby-code">XXXXXX</span>
            </div>
            <div class="lobby-settings-summary" id="lobby-settings">
                <!-- Settings summary -->
            </div>
        </div>

        <div class="players-grid" id="players-grid">
            <!-- Players will be dynamically added here -->
        </div>

        <div class="lobby-footer">
            <div class="ready-status" id="ready-status">
                <span id="ready-count">0</span>/<span id="total-count">10</span> Hazƒ±r
            </div>
            <button class="btn btn-primary btn-large" id="btn-ready">
                Hazƒ±r
            </button>
            <button class="btn btn-success btn-large hidden" id="btn-start-game">
                Oyunu Ba≈ülat
            </button>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen hidden">
        <!-- Role Reveal -->
        <div id="role-reveal" class="role-reveal hidden">
            <div class="role-content">
                <h2 id="role-title">Rol√ºn</h2>
                <div id="role-icon" class="role-icon"></div>
                <p id="role-description"></p>
            </div>
        </div>

        <!-- Game Canvas -->
        <canvas id="game-canvas"></canvas>

        <!-- Game UI Overlay -->
        <div class="game-ui">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="alive-count">
                    <span class="crewmate-icon">üë§</span>
                    <span id="alive-crewmates">8</span>
                </div>
                <div class="task-progress">
                    <div class="task-bar">
                        <div class="task-fill" id="task-fill"></div>
                    </div>
                    <span id="task-text">0/5</span>
                </div>
            </div>

            <!-- Joystick -->
            <div class="joystick-container" id="joystick-container">
                <div class="joystick-base">
                    <div class="joystick-stick" id="joystick-stick"></div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="action-btn" id="btn-use">
                    <span>Kullan</span>
                </button>
                <button class="action-btn" id="btn-report">
                    <span>Bildir</span>
                </button>
                <button class="action-btn hidden" id="btn-kill">
                    <span>√ñld√ºr</span>
                </button>
                <button class="action-btn hidden" id="btn-sabotage">
                    <span>Sabotaj</span>
                </button>
                <button class="action-btn" id="btn-emergency">
                    <span>Acil</span>
                </button>
            </div>

            <!-- Map -->
            <div class="minimap" id="minimap">
                <canvas id="minimap-canvas"></canvas>
            </div>
        </div>
    </div>

    <!-- Meeting Screen -->
    <div id="meeting-screen" class="screen hidden">
        <div class="meeting-header">
            <h2 id="meeting-title">Acil Toplantƒ±</h2>
            <div class="meeting-timer" id="meeting-timer">45</div>
        </div>

        <div class="meeting-body" id="meeting-body">
            <!-- Dead body info or emergency caller -->
        </div>

        <div class="players-voting" id="players-voting">
            <!-- Players for voting -->
        </div>

        <div class="chat-container">
            <div class="chat-messages" id="chat-messages">
                <!-- Chat messages -->
            </div>
            <div class="chat-input-container">
                <input type="text" id="chat-input" placeholder="Mesajƒ±nƒ±zƒ± yazƒ±n..." maxlength="100">
                <button id="btn-send-chat">G√∂nder</button>
            </div>
        </div>

        <div class="voting-results hidden" id="voting-results">
            <!-- Voting results -->
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="game-over-screen" class="screen hidden">
        <div class="game-over-content">
            <h1 id="game-over-title">Crewmates Kazandƒ±!</h1>
            <div id="game-over-reason"></div>

            <div class="winners-list" id="winners-list">
                <!-- Winners -->
            </div>

            <button class="btn btn-primary btn-large" id="btn-back-to-menu">
                Ana Men√ºye D√∂n
            </button>
        </div>
    </div>

    <!-- Password Modal -->
    <div id="password-modal" class="modal hidden">
        <div class="modal-content">
            <h3>≈ûifre Gerekli</h3>
            <input type="password" id="modal-password" placeholder="≈ûifreyi girin">
            <div class="modal-buttons">
                <button class="btn btn-secondary" id="btn-cancel-password">ƒ∞ptal</button>
                <button class="btn btn-primary" id="btn-submit-password">Katƒ±l</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="telegram.js"></script>
    <script src="network.js"></script>
    <script src="game3d.js"></script>
    <script src="game.js"></script>
    <script src="ui.js"></script>
    <script src="main.js"></script>
</body>

</html>
