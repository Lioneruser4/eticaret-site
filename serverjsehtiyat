// server.js (fetchVinSpecs funksiyasını bu cür dəyişin)

async function fetchVinSpecs(vin) {
    try {
        const url = `https://vpic.nhtsa.dot.gov/api/vehicles/decodevin/${vin}?format=json`;
        
        // Timeout əlavə edirik ki, əgər sorğu çox uzansa server crash etməsin
        const response = await axios.get(url, { timeout: 8000 }); 
        const data = response.data;
        
        const info = {};
        
        // Əgər nəticələr boş gələrsə, xəta atmasın
        if (!data || !data.Results) return info; 
        
        data.Results.forEach(item => {
            if (item.Value && item.Value !== "null") {
                // ... (digər məlumat çəkmə hissəsi)
            }
        });
        return info;
    } catch (e) { 
        console.error("VIN Specs Error:", e.message);
        // Hər hansı bir xəta olsa, boş obyekt qaytarılır, server crash etmir
        return {}; 
    }
}
